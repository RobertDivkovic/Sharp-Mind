{% extends "base.html" %}
{% load static %}

{% block title %}About Us{% endblock %}

{% block content %}
<h1>{{ about.title }}</h1>

<div class="row">
    <div class="col-12 col-md-4 text-center">
        {% if "placeholder" in about.profile_image.url %}
            <img src="{% static 'images/library.png' %}" width="75%" alt="placeholder image">
        {% else %}
            <img src="{{ about.profile_image.url }}" width="75%" alt="{{ about.title }}">
        {% endif %}
    </div>
    <div class="col-12 col-md-8">
        <p>{{ about.content|default:"Content is not available at the moment." }}</p>
    </div>
</div>

<hr>

{% if user.is_authenticated %}
<h3>Submit a Collaboration Request</h3>

<!-- Display messages -->
{% if messages %}
    {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">{{ message }}</div>
    {% endfor %}
{% endif %}

<!-- Display form errors -->
{% if collaboration_form.errors %}
    <div class="alert alert-danger">
        <ul>
            {% for field, errors in collaboration_form.errors.items %}
                {% for error in errors %}
                    <li>{{ field|capfirst }}: {{ error }}</li>
                {% endfor %}
            {% endfor %}
        </ul>
    </div>
{% endif %}

<form method="POST" action="{% url 'collaboration_request' %}">
    {% csrf_token %}
    {{ collaboration_form.as_p }}
    <button type="submit" class="btn btn-primary">Submit</button>
</form>
{% else %}
<p>Please <a href="{% url 'account_login' %}">log in</a> to submit a collaboration request.</p>
{% endif %}
{% endblock %}